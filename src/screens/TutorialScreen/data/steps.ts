/**
 * D√©finition des √©tapes du tutoriel
 */

import { TutorialStep } from '../types';

export const TUTORIAL_STEPS: TutorialStep[] = [
  // ============================================
  // NIVEAU D√âBUTANT - "Premiers Lancers" üé≤
  // ============================================
  {
    id: 'beginner_01_welcome',
    level: 'beginner',
    order: 1,
    title: 'Bienvenue Interactive',
    subtitle: 'Salut ! Je suis D√©d√©, ton guide personnel',
    description: 'D√©couvre l\'acad√©mie Yams Score et commence ton aventure !',
    videoUrl: 'tutorial/beginner/01_welcome.mp4',
    estimatedDuration: 30,
    xpReward: 50,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_02_create_game',
    level: 'beginner',
    order: 2,
    title: 'Cr√©er ta Premi√®re Partie',
    subtitle: 'Tape sur "Nouvelle Partie"',
    description: 'Apprends √† d√©marrer une nouvelle partie de Yams en quelques secondes.',
    videoUrl: 'tutorial/beginner/02_create_game.mp4',
    estimatedDuration: 45,
    xpReward: 50,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_03_add_players',
    level: 'beginner',
    order: 3,
    title: 'Ajouter des Joueurs',
    subtitle: 'Invite tes amis !',
    description: 'D√©couvre comment ajouter jusqu\'√† 4 joueurs avec des noms et avatars sympas.',
    videoUrl: 'tutorial/beginner/03_add_players.mp4',
    estimatedDuration: 60,
    xpReward: 50,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_04_scoresheet',
    level: 'beginner',
    order: 4,
    title: 'Comprendre la Feuille de Score',
    subtitle: 'Anatomie d\'une feuille de Yams',
    description: 'Vue d√©taill√©e de la feuille : section sup√©rieure, bonus, combinaisons...',
    videoUrl: 'tutorial/beginner/04_scoresheet.mp4',
    estimatedDuration: 90,
    xpReward: 75,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_05_first_score',
    level: 'beginner',
    order: 5,
    title: 'Marquer ton Premier Score',
    subtitle: 'Les d√©s sont lanc√©s !',
    description: 'Simule un lancer de d√©s et apprends √† entrer ton premier score.',
    videoUrl: 'tutorial/beginner/05_first_score.mp4',
    estimatedDuration: 75,
    xpReward: 75,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_06_bonus',
    level: 'beginner',
    order: 6,
    title: 'Le Bonus Magique',
    subtitle: 'Atteindre 63 points = +35',
    description: 'Comprends comment d√©bloquer le pr√©cieux bonus de 35 points.',
    videoUrl: 'tutorial/beginner/06_bonus.mp4',
    estimatedDuration: 60,
    xpReward: 75,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_07_brelan_carre',
    level: 'beginner',
    order: 7,
    title: 'Brelan & Carr√©',
    subtitle: '3 ou 4 d√©s identiques',
    description: 'Ma√Ætrise les combinaisons Brelan (3 d√©s) et Carr√© (4 d√©s).',
    videoUrl: 'tutorial/beginner/07_brelan_carre.mp4',
    estimatedDuration: 70,
    xpReward: 75,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_08_full_house',
    level: 'beginner',
    order: 8,
    title: 'Full House',
    subtitle: 'Brelan + Paire = 25 points',
    description: 'D√©couvre la combinaison Full House et comment la scorer.',
    videoUrl: 'tutorial/beginner/08_full_house.mp4',
    estimatedDuration: 65,
    xpReward: 75,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_09_suites',
    level: 'beginner',
    order: 9,
    title: 'Les Suites',
    subtitle: 'Petite (30pts) et Grande (40pts)',
    description: 'Apprends √† reconna√Ætre et scorer les suites de d√©s.',
    videoUrl: 'tutorial/beginner/09_suites.mp4',
    estimatedDuration: 80,
    xpReward: 75,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'beginner_10_yams',
    level: 'beginner',
    order: 10,
    title: 'Le YAMS !',
    subtitle: '5 d√©s identiques = 50 points',
    description: 'La combinaison ultime : d√©couvre le Yams et c√©l√®bre ta victoire !',
    videoUrl: 'tutorial/beginner/10_yams.mp4',
    estimatedDuration: 90,
    xpReward: 100,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },

  // ============================================
  // NIVEAU INTERM√âDIAIRE - "Strat√©gies Avanc√©es" üéØ
  // ============================================
  {
    id: 'intermediate_11_stats',
    level: 'intermediate',
    order: 11,
    title: 'Mode Statistiques',
    subtitle: 'Analyse tes performances',
    description: 'D√©couvre le tableau de bord statistiques et comprends tes forces.',
    videoUrl: 'tutorial/intermediate/11_stats.mp4',
    estimatedDuration: 90,
    xpReward: 100,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'intermediate_12_shortcuts',
    level: 'intermediate',
    order: 12,
    title: 'Raccourcis Secrets',
    subtitle: 'Gestes cach√©s r√©v√©l√©s',
    description: 'Apprends les swipes, long press et autres gestes secrets de l\'app.',
    videoUrl: 'tutorial/intermediate/12_shortcuts.mp4',
    estimatedDuration: 100,
    xpReward: 100,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'intermediate_13_multiplayer',
    level: 'intermediate',
    order: 13,
    title: 'Gestion Multi-joueurs',
    subtitle: 'Organise des parties √† 4',
    description: 'Simule une partie compl√®te avec 4 joueurs et suit le classement en direct.',
    videoUrl: 'tutorial/intermediate/13_multiplayer.mp4',
    estimatedDuration: 120,
    xpReward: 100,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'intermediate_14_customization',
    level: 'intermediate',
    order: 14,
    title: 'Personnalisation Avanc√©e',
    subtitle: 'Th√®mes, couleurs, avatars',
    description: 'Explore toutes les options de personnalisation de l\'app.',
    videoUrl: 'tutorial/intermediate/14_customization.mp4',
    estimatedDuration: 80,
    xpReward: 100,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'intermediate_15_sharing',
    level: 'intermediate',
    order: 15,
    title: 'Partage de R√©sultats',
    subtitle: 'Fais rayonner tes victoires',
    description: 'Apprends √† cr√©er de beaux visuels pour partager tes scores.',
    videoUrl: 'tutorial/intermediate/15_sharing.mp4',
    estimatedDuration: 70,
    xpReward: 100,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'intermediate_16_history',
    level: 'intermediate',
    order: 16,
    title: 'Navigation dans l\'Historique',
    subtitle: 'Revisite tes parties',
    description: 'Explore l\'historique complet et analyse tes parties pass√©es.',
    videoUrl: 'tutorial/intermediate/16_history.mp4',
    estimatedDuration: 75,
    xpReward: 100,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'intermediate_17_mental_math',
    level: 'intermediate',
    order: 17,
    title: 'Calcul Mental',
    subtitle: 'Astuces de calcul rapide',
    description: 'Techniques pour calculer rapidement tes scores sans erreur.',
    videoUrl: 'tutorial/intermediate/17_mental_math.mp4',
    estimatedDuration: 90,
    xpReward: 125,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'intermediate_18_past_analysis',
    level: 'intermediate',
    order: 18,
    title: 'Analyse de Parties Pass√©es',
    subtitle: 'Apprends de tes erreurs',
    description: 'Utilise l\'IA pour analyser o√π tu peux t\'am√©liorer.',
    videoUrl: 'tutorial/intermediate/18_past_analysis.mp4',
    estimatedDuration: 95,
    xpReward: 125,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },

  // ============================================
  // NIVEAU EXPERT - "Ma√Ætrise Absolue" üëë
  // ============================================
  {
    id: 'expert_19_optimization',
    level: 'expert',
    order: 19,
    title: 'Optimisation Strat√©gique',
    subtitle: 'L\'IA analyse ta strat√©gie',
    description: 'D√©couvre les coups optimaux gr√¢ce √† l\'analyse IA avanc√©e.',
    videoUrl: 'tutorial/expert/19_optimization.mp4',
    estimatedDuration: 120,
    xpReward: 150,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'expert_20_speedrun',
    level: 'expert',
    order: 20,
    title: 'Mode Speedrun',
    subtitle: 'Chronom√®tre et leaderboard',
    description: 'D√©fie les meilleurs joueurs du monde en mode speedrun.',
    videoUrl: 'tutorial/expert/20_speedrun.mp4',
    estimatedDuration: 100,
    xpReward: 150,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'expert_21_combos',
    level: 'expert',
    order: 21,
    title: 'Combos Avanc√©s',
    subtitle: 'Encha√Æne les scores',
    description: 'Apprends √† encha√Æner les combinaisons pour maximiser tes points.',
    videoUrl: 'tutorial/expert/21_combos.mp4',
    estimatedDuration: 110,
    xpReward: 150,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'expert_22_competitive',
    level: 'expert',
    order: 22,
    title: 'Mode Comp√©titif',
    subtitle: 'Affrontements en ligne',
    description: 'Pr√©pare-toi aux tournois et d√©fis comp√©titifs.',
    videoUrl: 'tutorial/expert/22_competitive.mp4',
    estimatedDuration: 130,
    xpReward: 150,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'expert_23_predictions',
    level: 'expert',
    order: 23,
    title: 'Analyse Pr√©dictive',
    subtitle: 'Anticipe les coups',
    description: 'Utilise les probabilit√©s pour pr√©dire les meilleurs choix.',
    videoUrl: 'tutorial/expert/23_predictions.mp4',
    estimatedDuration: 125,
    xpReward: 175,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'expert_24_tournament',
    level: 'expert',
    order: 24,
    title: 'Cr√©ation de Tournois',
    subtitle: 'Organise tes propres comp√©titions',
    description: 'Cr√©e et g√®re des tournois personnalis√©s avec tes amis.',
    videoUrl: 'tutorial/expert/24_tournament.mp4',
    estimatedDuration: 140,
    xpReward: 175,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
  {
    id: 'expert_25_masterclass',
    level: 'expert',
    order: 25,
    title: 'Master Class Finale',
    subtitle: 'Deviens une l√©gende',
    description: 'La formation ultime pour ma√Ætriser TOUS les aspects du Yams.',
    videoUrl: 'tutorial/expert/25_masterclass.mp4',
    estimatedDuration: 180,
    xpReward: 200,
    completed: false,
    attempts: 0,
    perfectRun: false,
  },
];

export const getStepsByLevel = (level: TutorialStep['level']): TutorialStep[] => {
  return TUTORIAL_STEPS.filter(step => step.level === level).sort(
    (a, b) => a.order - b.order
  );
};

export const getStepById = (id: string): TutorialStep | undefined => {
  return TUTORIAL_STEPS.find(step => step.id === id);
};

export const getNextStep = (currentId: string): TutorialStep | null => {
  const currentStep = getStepById(currentId);
  if (!currentStep) return null;

  const nextOrder = currentStep.order + 1;
  return TUTORIAL_STEPS.find(step => step.order === nextOrder) || null;
};

export const getPreviousStep = (currentId: string): TutorialStep | null => {
  const currentStep = getStepById(currentId);
  if (!currentStep) return null;

  const prevOrder = currentStep.order - 1;
  return TUTORIAL_STEPS.find(step => step.order === prevOrder) || null;
};

export const getTotalSteps = (): number => {
  return TUTORIAL_STEPS.length;
};

export const getBeginnerSteps = (): TutorialStep[] => getStepsByLevel('beginner');
export const getIntermediateSteps = (): TutorialStep[] =>
  getStepsByLevel('intermediate');
export const getExpertSteps = (): TutorialStep[] => getStepsByLevel('expert');
