/**
 * Appearance Section - Theme, Colors, Dice Style
 */

import React from 'react';
import { View } from 'react-native';
import { useAppDispatch, useAppSelector } from '../../../store/hooks';
import {
  setThemeMode,
  setAccentColor,
  setDiceStyle,
  toggleAnimations,
  toggleReduceMotion,
  type ThemeMode,
  type AccentColor,
  type DiceStyle,
} from '../../../store/slices/settingsSlice';
import SettingCard from '../components/SettingCard';
import SelectorSetting from '../components/SelectorSetting';
import ColorPicker from '../components/ColorPicker';
import ToggleSetting from '../components/ToggleSetting';

const AppearanceSection: React.FC = () => {
  const dispatch = useAppDispatch();
  const themeMode = useAppSelector((state) => state.settings.themeMode);
  const accentColor = useAppSelector((state) => state.settings.accentColor);
  const diceStyle = useAppSelector((state) => state.settings.diceStyle);
  const animationsEnabled = useAppSelector(
    (state) => state.settings.animationsEnabled
  );
  const reduceMotion = useAppSelector((state) => state.settings.reduceMotion);

  return (
    <SettingCard title="Apparence üé®">
      {/* Th√®me */}
      <SelectorSetting<ThemeMode>
        icon="üåì"
        title="Th√®me"
        options={[
          { id: 'light', label: 'Clair', icon: '‚òÄÔ∏è' },
          { id: 'dark', label: 'Sombre', icon: 'üåô' },
          { id: 'auto', label: 'Auto', icon: 'üîÑ' },
        ]}
        value={themeMode}
        onValueChange={(value) => dispatch(setThemeMode(value))}
      />

      {/* Couleur d'accent */}
      <ColorPicker
        icon="üé®"
        title="Couleur d'accent"
        description="Personnalise l'interface"
        value={accentColor}
        onValueChange={(value) => dispatch(setAccentColor(value))}
        userLevel={5} // TODO: Get from user level
      />

      {/* Style des d√©s */}
      <SelectorSetting<DiceStyle>
        icon="üé≤"
        title="Style des d√©s"
        options={[
          { id: 'classic', label: 'Classique', icon: '‚öÄ' },
          { id: 'modern', label: 'Moderne', icon: 'üé≤' },
          { id: '3d', label: '3D', icon: 'üßä' },
        ]}
        value={diceStyle}
        onValueChange={(value) => dispatch(setDiceStyle(value))}
      />

      {/* Animations */}
      <ToggleSetting
        icon="‚ú®"
        title="Animations"
        description="Effets visuels et transitions"
        value={animationsEnabled}
        onValueChange={() => dispatch(toggleAnimations())}
        color="#50C878"
      />

      {/* R√©duire les animations */}
      <ToggleSetting
        icon="‚ôø"
        title="R√©duire les animations"
        description="Mode accessibilit√©"
        value={reduceMotion}
        onValueChange={() => dispatch(toggleReduceMotion())}
        color="#4A90E2"
      />
    </SettingCard>
  );
};

export default AppearanceSection;
